# Williams Treaty Territories - Layer Configuration
# This file defines all map layers and their properties

# Layer activation:
# - active: true  - Layer appears in UI and can be loaded (default)
# - active: false - Layer configuration retained but hidden from UI
#   Use false to temporarily disable layers, keep WIP configs, or maintain
#   seasonal/conditional layers without deleting their configuration

# Layer categories for organizing the UI
categories:
  - id: boundaries
    name: Boundaries
    order: 1

  - id: organizations
    name: Organizations
    order: 2

  - id: communities
    name: Communities
    order: 3

  - id: vegetation
    name: Vegetation
    order: 4

  - id: topography
    name: Topography
    order: 5

  - id: fire
    name: Fire Data
    order: 6

  - id: community_data
    name: Community Data
    order: 7

  - id: biodiversity
    name: Biodiversity
    order: 8

  - id: satellite
    name: Satellite Data
    order: 9

# Layer definitions
layers:
  # ============================================================================
  # BOUNDARIES
  # ============================================================================

  - id: treaty
    name: Williams Treaty Territories
    category: boundaries
    type: polygon
    data_url: /data/datasets/boundaries/williams_treaty.geojson
    initial_visibility: true
    status: available
    active: true

    style:
      fill:
        color: '#2c5f2d'
        opacity: 0.1
      outline:
        color: '#2c5f2d'
        width: 3
        opacity: 0.8

    popup:
      title_field: ENAME
      title_default: Williams Treaty Territories
      fields:
        - label: Treaty Date
          field: DATE_YEAR
          default: '1923'
        - label: Category
          field: Category
          default: Treaty Land

    info:
      description: Treaty boundaries signed in 1923

  - id: ontario_reserves
    name: Ontario First Nations Reserves
    category: boundaries
    type: polygon
    data_url: /data/datasets/boundaries/ontario_reserves.geojson
    initial_visibility: false
    status: available
    active: true
    lazy_load: true

    style:
      fill:
        color: '#fee5d9'
        opacity: 0.2
      outline:
        color: '#fc8d59'
        width: 1
        opacity: 0.5
      before_layer: treaty-fill

    popup:
      title_fields: [adminAreaNameEng]
      fields:
        - label: Reserve Name
          field: adminAreaNameEng
        - label: Reserve ID
          field: adminAreaId
        - label: Type
          field: distributionTypeEng
        - label: Region
          field: adminRegionEng
        - label: Accuracy
          field: absoluteAccuracyEng

    info:
      description: All 203 Indian Reserves in Ontario from Natural Resources Canada

  - id: municipalities
    name: Municipalities
    category: boundaries
    type: polygon
    data_url: /data/datasets/williams_treaty/municipalities.geojson
    initial_visibility: false
    status: available
    active: true
    lazy_load: true

    style:
      fill:
        color: '#e0e0e0'
        opacity: 0.1
      outline:
        color: '#999999'
        width: 0.5
        opacity: 0.4

    popup:
      title_fields: [CSDNAME]
      fields:
        - label: Municipality Name
          field: CSDNAME
        - label: Type
          field: CSDTYPE
        - label: Population (2021)
          field: LANDAREA
        - label: Province
          field: PRNAME

    info:
      description: Municipalities in Williams Treaty territory from Statistics Canada 2021 Census

  - id: conservation_authorities
    name: Conservation Authorities
    category: boundaries
    type: polygon
    data_url: /data/datasets/williams_treaty/conservation_authorities.geojson
    initial_visibility: false
    status: available
    active: true
    lazy_load: true

    style:
      fill:
        color: '#a6cee3'
        opacity: 0.2
      outline:
        color: '#1f78b4'
        width: 1.5
        opacity: 0.6

    popup:
      title_fields: [LEGAL_NAME, COMMON_NAME]
      fields:
        - label: Legal Name
          field: LEGAL_NAME
        - label: Common Name
          field: COMMON_NAME
        - label: Area (sq km)
          field: AREA_IN_SQ_KM
        - label: Type
          field: F_TYPE

    info:
      description: Conservation Authorities in Williams Treaty territory - watershed management agencies that deliver programs to protect and manage natural resources.

  - id: reserves
    name: Williams Treaty Reserves
    category: boundaries
    type: polygon
    data_url: /data/datasets/boundaries/williams_treaty_reserves.geojson
    initial_visibility: false
    status: available
    active: true  # Set to false to hide from UI while keeping configuration
    lazy_load: true

    style:
      fill:
        color: '#fc8d59'
        opacity: 0.4
      outline:
        color: '#d73027'
        width: 2
        opacity: 0.8
      before_layer: treaty-fill

    popup:
      title_fields: [adminAreaNameEng]
      fields:
        - label: Reserve Name
          field: adminAreaNameEng
        - label: Reserve ID
          field: adminAreaId
        - label: Type
          field: distributionTypeEng
        - label: Region
          field: adminRegionEng
        - label: Accuracy
          field: absoluteAccuracyEng

    info:
      description: The 10 Indian Reserves of the 7 Williams Treaty First Nations

  - id: provincial_parks
    name: Provincial Parks
    category: boundaries
    type: polygon
    data_url: /data/datasets/williams_treaty/provincial_parks.geojson
    initial_visibility: false
    status: available
    active: true
    lazy_load: true

    style:
      fill:
        # Color by park class
        color:
          type: categorical
          field: PROVINCIAL_PARK_CLASS_ENG
          values:
            Wilderness: '#006d2c'           # Dark green - most protected
            Natural Environment: '#31a354'  # Medium green
            Waterway: '#74c476'             # Light green
            Recreation: '#a1d99b'           # Pale green
            Cultural Heritage: '#8c6bb1'    # Purple for cultural sites
          default: '#66c2a4'                # Teal for others
        opacity: 0.4
      outline:
        color: '#238b45'
        width: 2
        opacity: 0.8

    popup:
      title_field: PROTECTED_AREA_NAME_ENG
      fields:
        - label: Short Name
          field: COMMON_SHORT_NAME
        - label: Park Class
          field: PROVINCIAL_PARK_CLASS_ENG
        - label: IUCN Category
          field: IUCN_CATEGORY
        - label: Area (ha)
          field: REGULATED_AREA
          format: '{value:,.0f} ha'
        - label: Established
          field: PROTDATE
        - label: Status
          field: STATUS_ENG
        - label: Management
          field: MANAGEMENT_ENG
        - label: Website
          field: URL
          type: link

    legend:
      type: items
      title: Provincial Parks
      items:
        - color: rgba(0, 109, 44, 0.4)
          border: 2px solid #238b45
          label: Wilderness
        - color: rgba(49, 163, 84, 0.4)
          border: 2px solid #238b45
          label: Natural Environment
        - color: rgba(116, 196, 118, 0.4)
          border: 2px solid #238b45
          label: Waterway
        - color: rgba(161, 217, 155, 0.4)
          border: 2px solid #238b45
          label: Recreation
        - color: rgba(140, 107, 177, 0.4)
          border: 2px solid #238b45
          label: Cultural Heritage
      description: Parks classified by primary purpose

    info:
      description: Provincial Parks in Williams Treaty territory classified by conservation and recreation purpose

  - id: watersheds
    name: Watersheds
    category: boundaries
    type: polygon
    data_url: /data/datasets/environmental/watersheds.geojson
    initial_visibility: false
    status: available
    active: true
    lazy_load: true

    style:
      fill:
        color: '#4292c6'
        opacity: 0.15
      outline:
        color: '#08519c'
        width: 1.5
        opacity: 0.6

    popup:
      title_fields: [NAME1, NAME2]
      title_default: Watershed
      fields:
        - label: Primary Watershed
          field: NAME1
        - label: Secondary Watershed
          field: NAME2
        - label: Tertiary Watershed
          field: NAME3
          optional: true
        - label: Quaternary Watershed
          field: NAME4
          optional: true
        - label: Area (hectares)
          field: AREA_HA
          format: '{value:,.2f} ha'
        - label: Area (acres)
          field: AREA_ACRE
          format: '{value:,.2f} acres'
        - label: Watershed Code
          field: CODE6
        - label: Data Source
          field: SOURCE

    legend:
      type: items
      title: Watersheds
      items:
        - color: rgba(66, 146, 198, 0.15)
          border: 1.5px solid #08519c
          label: Watershed boundary
      description: Hierarchical watershed drainage areas

    info:
      description: Ontario watersheds showing hierarchical drainage basins from primary to quaternary levels

  # ============================================================================
  # ORGANIZATIONS
  # ============================================================================

  - id: charities
    name: Environmental Charities
    category: organizations
    type: point
    data_url: /data/datasets/organizations/environmental_organizations.geojson
    initial_visibility: false
    status: available
    active: true  # Now available in S3

    style:
      circle:
        radius: 6
        color: '#3887be'
        opacity: 0.8
        stroke_width: 2
        stroke_color: '#ffffff'

    popup:
      title_field: name
      fields:
        - label: Location
          format: '{city}, {province}'
        - label: Category
          field: category
        - label: Revenue
          field: revenue
          format: '${value:,.0f}'
        - label: Programs
          field: programs
          truncate: 100
        - label: Website
          field: website
          type: link

    info:
      description: 186 environmental organizations

  # ============================================================================
  # COMMUNITIES
  # ============================================================================

  - id: communities
    name: Williams Treaty First Nations
    category: communities
    type: point
    data_url: /data/datasets/boundaries/williams_treaty_communities.geojson
    initial_visibility: false
    status: available
    active: true

    style:
      circle:
        radius: 8
        color: '#d73027'
        opacity: 0.9
        stroke_width: 2
        stroke_color: '#ffffff'

    popup:
      title_field: name
      fields:
        - label: Reserve
          field: reserve_name
        - label: Population
          field: population
          format: '~{value:,.0f}'
        - label: Treaty
          field: treaty

    info:
      description: 7 First Nations communities (~9,000 people)

  - id: infrastructure
    name: Indigenous Infrastructure Projects
    category: community_data
    type: point
    data_url: /data/datasets/williams_treaty/infrastructure_projects.geojson
    initial_visibility: false
    status: available
    active: true
    lazy_load: true

    style:
      circle:
        radius: 5
        opacity: 0.8
        stroke_width: 1
        stroke_color: '#ffffff'
        # Data-driven styling
        color:
          type: categorical
          field: category
          values:
            Housing: '#e41a1c'
            'Water and Wastewater': '#377eb8'
            'Solid Waste Management': '#4daf4a'
            'Fire Protection': '#ff7f00'
            Health: '#984ea3'
          default: '#999999'

    popup:
      title_fields: [project_name]
      title_default: Infrastructure Project
      fields:
        - label: Community
          field: community
        - label: Category
          field: category
        - label: Status
          field: status
        - label: Description
          field: description
          truncate: 200
        - label: Investment
          field: investment
          hide_if: Not Available

    info:
      description: Indigenous infrastructure projects in Williams Treaty territory from ISC ICIM database

  - id: federal_infrastructure
    name: Federal Infrastructure Projects
    category: community_data
    type: point
    data_url: /data/datasets/community/federal_infrastructure.geojson
    initial_visibility: false
    status: available
    active: true
    lazy_load: true

    style:
      circle:
        radius: 5
        opacity: 0.8
        stroke_width: 1
        stroke_color: '#ffffff'
        color:
          type: categorical
          field: category
          values:
            Housing: '#e41a1c'
            'Public Transit': '#377eb8'
            'Green Infrastructure': '#4daf4a'
            'Roads, Bridges and Trade Infrastructure': '#ff7f00'
            'Community, Culture and Recreation': '#984ea3'
          default: '#999999'

    popup:
      title_field: project_name
      title_default: Federal Project
      fields:
        - label: Department
          field: department
        - label: Program
          field: program
        - label: Category
          field: category
        - label: Municipality
          field: municipality
        - label: Federal Contribution
          field: federal_contribution
        - label: Status
          field: status
        - label: Indigenous Recipient
          field: indigenous_recipient

    info:
      description: 1,465 federal infrastructure projects in Williams Treaty area

  - id: water_advisories
    name: Water Advisories
    category: community_data
    type: point
    data_url: /data/datasets/williams_treaty/water_advisories.geojson
    initial_visibility: false
    status: available
    active: true
    lazy_load: true

    style:
      circle:
        radius: 7
        opacity: 0.9
        stroke_width: 2
        stroke_color: '#ffffff'
        # Data-driven styling
        color:
          type: conditional
          field: is_active
          conditions:
            - when: true
              value: '#d73027'  # Red for active
            - when: false
              value: '#91cf60'  # Green for lifted

    popup:
      title_fields: [water_system]
      title_default: Water System
      fields:
        - label: First Nation
          field: first_nation
        - label: Status
          field: is_active
          format_active: '<span style="color:#d73027;font-weight:bold">ACTIVE</span>'
          format_inactive: '<span style="color:#91cf60;font-weight:bold">Lifted</span>'
        - label: Type
          field: advisory_type
        - label: Date Set
          field: date_set
        - label: Date Lifted
          field: date_lifted
          optional: true
        - label: Duration
          field: duration_days
          format: '{value} days'
          optional: true
        - label: Corrective Measure
          field: corrective_measure
          optional: true

    info:
      description: 15 drinking water advisories in Williams Treaty area (1 active, 14 lifted)

  - id: cwb
    name: Community Well-Being
    category: community_data
    type: polygon
    data_url: /data/datasets/williams_treaty/community_wellbeing.geojson
    initial_visibility: false
    status: available
    active: true
    lazy_load: true

    style:
      fill:
        # Choropleth coloring based on CWB score (0-100 scale)
        color:
          type: interpolate
          field: cwb_score
          stops:
            - [50, '#d73027']  # Very low CWB - red
            - [65, '#fc8d59']  # Low - orange
            - [70, '#fee08b']  # Medium-low - yellow
            - [75, '#d9ef8b']  # Medium - yellow-green
            - [80, '#91cf60']  # Medium-high - light green
            - [85, '#1a9850']  # High CWB - green
        opacity: 0.65
      outline:
        color: '#555'
        width: 1
        opacity: 0.6
      before_layer: treaty-fill

    popup:
      title_field: name
      fields:
        - label: Community Well-Being Score
          field: cwb_score
        - label: Population
          field: population
        - label: Income
          field: income_score
          optional: true
        - label: Education
          field: education_score
          optional: true
        - label: Housing
          field: housing_score
          optional: true
        - label: Labour
          field: labour_score
          optional: true

    info:
      description: Community Well-Being Index for communities in Williams Treaty territory (2021 data)

  - id: csicp
    name: Cultural Infrastructure Funding
    category: community_data
    type: point
    data_url: /data/processed/csicp/csicp_funding.geojson
    initial_visibility: false
    status: available
    active: false  # Deactivated - data not in S3 yet
    lazy_load: true

    # Override to use local-only mode (data not in S3 yet)
    data_source:
      mode: local

    style:
      circle:
        radius: 8
        color: '#9e0142'
        opacity: 0.9
        stroke_width: 2
        stroke_color: '#ffffff'

    popup:
      title_field: project_name
      fields:
        - label: Group
          field: group_name
        - label: Community
          field: matched_community
        - label: Type
          field: project_type
        - label: Funding
          field: funding
          format: '${value:,.0f}'

    info:
      description: CSICP projects ($60,000)

  # ============================================================================
  # VEGETATION
  # ============================================================================

  - id: ndvi
    name: NDVI 2024 (Vegetation Index)
    category: satellite
    type: raster
    data_url: https://ontario-environmental-data.s3.amazonaws.com/datasets/satellite/ndvi/ontario_ndvi_2024_250m.tif
    initial_visibility: false
    status: available
    active: true
    lazy_load: true
    requires_library: georaster

    style:
      opacity: 0.7
      color_scale:
        type: continuous
        steps:
          - [0.2, [211, 48, 39, 180]]      # Red - very low
          - [0.3, [252, 141, 89, 180]]     # Orange-red - low
          - [0.4, [254, 224, 139, 180]]    # Yellow - moderate-low
          - [0.5, [217, 239, 139, 180]]    # Yellow-green - moderate
          - [0.6, [145, 207, 96, 180]]     # Light green - moderate-high
          - [0.7, [26, 152, 80, 180]]      # Green - high
          - [0.8, [0, 104, 55, 200]]       # Dark green - very high
      before_layer: treaty-fill

    legend:
      type: gradient
      title: NDVI Legend
      gradient: linear-gradient(to right, #d33027, #fc8d59, #fee08b, #d9ef8b, #91cf60, #1a9850, #006837)
      stops:
        - value: 0.2
          label: Low
        - value: 0.4
          label: Moderate
        - value: 0.6
          label: High
        - value: 0.8
          label: Dense
      description: Vegetation health indicator

    info:
      description: Annual 2024 MODIS 250m resolution vegetation health index from S3 (COG format)

  - id: landcover
    name: Land Cover 2020
    category: satellite
    type: raster
    data_url: https://ontario-environmental-data.s3.amazonaws.com/datasets/satellite/landcover/ontario_landcover_2020.tif
    initial_visibility: false
    status: available
    active: true
    lazy_load: true
    requires_library: georaster

    style:
      opacity: 0.7
      color_scale:
        type: categorical
        values:
          1:  [0, 61, 0, 180]        # Temperate/sub-polar needleleaf forest
          2:  [148, 156, 112, 180]   # Sub-polar taiga needleleaf forest
          5:  [0, 100, 0, 180]       # Temperate/sub-polar broadleaf deciduous
          6:  [44, 100, 44, 180]     # Mixed forest
          8:  [137, 90, 68, 180]     # Temperate/sub-polar shrubland
          10: [187, 175, 102, 180]   # Temperate/sub-polar grassland
          11: [223, 223, 194, 180]   # Sub-polar/polar shrubland-lichen-moss
          12: [196, 214, 170, 180]   # Sub-polar/polar grassland-lichen-moss
          13: [252, 192, 134, 180]   # Sub-polar/polar barren-lichen-moss
          14: [188, 188, 188, 180]   # Wetland
          15: [0, 0, 88, 180]        # Cropland
          16: [120, 130, 181, 180]   # Barren land
          17: [255, 0, 0, 180]       # Urban/developed
          18: [166, 219, 255, 180]   # Water
          19: [255, 255, 255, 200]   # Snow/ice
      before_layer: treaty-fill

    legend:
      type: categorical
      title: Land Cover Classes
      categories:
        - value: 1
          label: Needleleaf Forest
          color: '#003d00'
        - value: 2
          label: Taiga Forest
          color: '#949c70'
        - value: 5
          label: Deciduous Forest
          color: '#006400'
        - value: 6
          label: Mixed Forest
          color: '#2c642c'
        - value: 8
          label: Shrubland
          color: '#895a44'
        - value: 10
          label: Grassland
          color: '#bbaf66'
        - value: 14
          label: Wetland
          color: '#bcbcbc'
        - value: 15
          label: Cropland
          color: '#000058'
        - value: 16
          label: Barren
          color: '#7882b5'
        - value: 17
          label: Urban
          color: '#ff0000'
        - value: 18
          label: Water
          color: '#a6dbff'
        - value: 19
          label: Snow/Ice
          color: '#ffffff'
      description: 2020 land cover classification

    info:
      description: |
        North American Land Change Monitoring System (NALCMS) 2020 land cover
        classification for Ontario at 30m resolution, served from S3 (COG format).
        Data source: Natural Resources Canada

  # ============================================================================
  # TOPOGRAPHY
  # ============================================================================

  - id: elevation
    name: Elevation (DEM)
    category: topography
    type: raster
    data_url: /data/processed/dem/elevation.tif
    initial_visibility: false
    status: available
    active: false  # Deactivated - raster data not in S3 yet
    lazy_load: true
    requires_library: georaster

    # Override to use local-only mode (raster data not in S3 yet)
    data_source:
      mode: local

    # Coordinate adjustment to fix alignment issues
    coordinate_adjustment:
      shift_multiplier: 45.36  # Pixel height multiplier for latitude shift
      shift_axis: latitude     # Which axis to adjust (latitude = y-axis)
      shift_direction: negative # Shift direction (negative = subtract)

    style:
      opacity: 0.6
      color_scale:
        type: continuous
        steps:
          - [75, [8, 48, 107, 180]]         # Dark blue - water/lake level
          - [150, [33, 113, 181, 180]]      # Medium blue - lowlands
          - [225, [66, 146, 198, 180]]      # Light blue - low elevation
          - [300, [107, 174, 214, 180]]     # Pale blue - moderate
          - [350, [158, 202, 225, 180]]     # Very pale blue/cyan
          - [400, [198, 219, 239, 180]]     # Almost white-blue
          - [450, [253, 208, 162, 180]]     # Light orange - highlands
          - [500, [253, 174, 107, 180]]     # Orange - high elevation
          - [550, [241, 105, 19, 180]]      # Dark orange - mountains
          - [600, [217, 72, 1, 200]]        # Red-orange - highest peaks
      before_layer: treaty-fill

    legend:
      type: gradient
      title: Elevation Legend
      gradient: linear-gradient(to right, #08306b, #2171b5, #6baed6, #c6dbef, #fdd0a2, #fdae6b, #f16913, #d94801)
      stops:
        - value: 7
          label: Water
          unit: m
        - value: 150
          label: Lowlands
          unit: m
        - value: 300
          label: Moderate
          unit: m
        - value: 450
          label: Highlands
          unit: m
        - value: 582
          label: Peaks
          unit: m
      description: "CDEM 2m elevation data - Real terrain (Peterborough/Kingston region)"

    info:
      description: "Canadian Digital Elevation Model (CDEM) at 2m resolution showing real terrain elevation. Current coverage: eastern Williams Treaty area (Peterborough/Kingston region)"

  # ============================================================================
  # BIODIVERSITY
  # ============================================================================

  - id: ebird
    name: eBird Observations
    category: biodiversity
    type: point
    data_url: /data/datasets/biodiversity/ebird_observations.geojson
    initial_visibility: false
    status: available
    active: true
    lazy_load: true

    style:
      circle:
        radius: 5
        color: '#e74c3c'
        opacity: 0.7
        stroke_width: 1
        stroke_color: '#ffffff'

    popup:
      title_field: comName
      title_default: Bird Observation
      fields:
        - label: Common Name
          field: comName
        - label: Scientific Name
          field: sciName
        - label: Count
          field: howMany
        - label: Date
          field: obsDt
        - label: Location
          field: locName

    info:
      description: Recent eBird bird observations in the Williams Treaty area

  # ============================================================================
  # FIRE DATA
  # ============================================================================

  - id: fire
    name: Fire Perimeters
    category: fire
    type: polygon
    data_url: /data/datasets/williams_treaty/fire_perimeters.geojson
    initial_visibility: false
    status: available
    active: true
    lazy_load: true

    # Per-layer data source configuration
    # Example: This layer could prefer remote data for live updates
    data_source:
      # Override global fallback to try remote first (commented out for now)
      # fallback_priority: ["remote", "local"]

      # Source metadata
      source_info:
        provider: "Canadian Wildland Fire Information System (CWFIS)"
        dataset: "National Fire Database - Historical Fire Perimeters"
        date_range: "1976-2024"
        license: "Open Government License - Canada"
        license_url: "https://open.canada.ca/en/open-government-licence-canada"
        update_frequency: "Annual"
        source_url: "https://cwfis.cfs.nrcan.gc.ca/datamart"

    style:
      fill:
        color: '#d73027'
        opacity: 0.4
      outline:
        color: '#a50026'
        width: 1
        opacity: 0.8

    popup:
      title: Fire Perimeter
      fields:
        - label: Year
          fields: [year, YEAR, EXERCICE, AN_ORIGINE]
          default: Unknown
        - label: Area
          field: area
          format: '{value_ha:.2f} ha'
          calculate_ha_from: area  # area in mÂ²
        - label: Fire ID
          field: FIRE_ID
          optional: true
        - label: Origin
          field: ORIGINE
          optional: true

    legend:
      type: items
      title: Fire Perimeters Legend
      items:
        - color: rgba(215, 48, 39, 0.4)
          border: 1px solid #a50026
          label: Historical fire boundaries (2010-2024)
      description: Click on fire perimeters for details

    info:
      description: Historical fire perimeters in Williams Treaty territory (1976-2024)

    # Special behavior
    zoom_on_show:
      bounds: [[-78.7073861, 45.805734], [-76.91731653, 46.38118623]]
      padding: 50

  - id: fuel_type
    name: Wildland Fuel Classification
    category: fire
    type: raster
    data_url: /data/processed/fuel/fuel_types_web.tif
    initial_visibility: false
    status: available
    active: false  # Deactivated - raster data not in S3 yet
    lazy_load: true
    requires_library: georaster

    # Override to use local-only mode (raster data not in S3 yet)
    data_source:
      mode: local

    style:
      opacity: 0.6
      color_scale:
        type: categorical
        values:
          0: [200, 200, 200, 100]      # Non-fuel / Water
          99: [200, 200, 200, 100]     # Water
          1-4: [34, 139, 34, 180]      # Coniferous (C-1 to C-4) - Green
          5-7: [0, 100, 0, 180]        # Coniferous Dense (C-5 to C-7) - Dark green
          11-18: [255, 215, 0, 180]    # Deciduous (D-1, D-2) - Gold
          21-25: [173, 255, 47, 180]   # Mixed wood (M-1, M-2) - Yellow-green
          31-32: [184, 134, 11, 180]   # Slash (S-1, S-2) - Dark gold
          40-43: [255, 255, 153, 180]  # Grass (O-1a, O-1b) - Light yellow
        default: [139, 69, 19, 180]    # Other - Brown
      before_layer: treaty-fill

    legend:
      type: items
      title: Fuel Type Legend
      items:
        - color: rgba(34, 139, 34, 0.7)
          label: Coniferous (C-1 to C-4)
        - color: rgba(0, 100, 0, 0.7)
          label: Coniferous Dense (C-5 to C-7)
        - color: rgba(255, 215, 0, 0.7)
          label: Deciduous (D-1, D-2)
        - color: rgba(173, 255, 47, 0.7)
          label: Mixed Wood (M-1, M-2)
        - color: rgba(184, 134, 11, 0.7)
          label: Slash (S-1, S-2)
        - color: rgba(255, 255, 153, 0.7)
          label: Grass/Open (O-1a, O-1b)
      description: Canadian FBP System fuel types

    info:
      description: Canadian FBP System fuel types

  # ============================================================================
  # HYDROLOGY / WATER
  # ============================================================================

  - id: wetlands
    name: Wetlands
    category: boundaries
    type: polygon
    data_url: /data/datasets/williams_treaty/wetlands.geojson
    initial_visibility: false
    status: available
    active: true
    lazy_load: true

    style:
      fill:
        color: '#7fcdbb'
        opacity: 0.5
      outline:
        color: '#2c7fb8'
        width: 1
        opacity: 0.7

    popup:
      title_field: WETLAND_TYPE
      title_default: Wetland
      fields:
        - label: Type
          field: WETLAND_TYPE
        - label: Significance
          field: WETLAND_SIGNIFICANCE
        - label: Area (ha)
          field: AREA_HA
          format: '{value:,.2f} ha'
        - label: Evaluation Status
          field: EVALUATED_WETLAND_IND

    info:
      description: Wetlands in Williams Treaty territory with ecological significance ratings

  - id: watercourses
    name: Rivers & Streams
    category: boundaries
    type: polygon
    data_url: /data/datasets/williams_treaty/watercourses.geojson
    initial_visibility: false
    status: available
    active: true
    lazy_load: true

    style:
      fill:
        color: '#3182bd'
        opacity: 0.6
      outline:
        color: '#08519c'
        width: 1.5
        opacity: 0.8

    popup:
      title_field: OFFICIAL_NAME_UPPER
      title_default: Watercourse
      fields:
        - label: Name
          field: OFFICIAL_NAME_UPPER
        - label: Type
          field: WATERCOURSE_TYPE

    info:
      description: Rivers and streams in Williams Treaty territory from Ontario Hydro Network

  - id: waterbodies
    name: Lakes & Ponds
    category: boundaries
    type: polygon
    data_url: /data/datasets/williams_treaty/waterbodies.geojson
    initial_visibility: false
    status: available
    active: true
    lazy_load: true

    style:
      fill:
        color: '#6baed6'
        opacity: 0.6
      outline:
        color: '#2171b5'
        width: 1
        opacity: 0.8

    popup:
      title_field: OFFICIAL_NAME_UPPER
      title_default: Waterbody
      fields:
        - label: Name
          field: OFFICIAL_NAME_UPPER
        - label: Type
          field: WATERBODY_TYPE

    info:
      description: Lakes and ponds in Williams Treaty territory from Ontario Hydro Network

  - id: watersheds_tertiary
    name: Watersheds (Tertiary)
    category: boundaries
    type: polygon
    data_url: /data/datasets/environmental/watersheds_tertiary.geojson
    initial_visibility: false
    status: available
    active: true
    lazy_load: true

    style:
      fill:
        color: '#9ecae1'
        opacity: 0.2
      outline:
        color: '#3182bd'
        width: 2
        opacity: 0.7

    popup:
      title_field: TERTIARY_WATERSHED_NAME
      title_default: Tertiary Watershed
      fields:
        - label: Name
          field: TERTIARY_WATERSHED_NAME
        - label: Code
          field: TERTIARY_WATERSHED_CODE
        - label: Area (ha)
          field: AREA_HA
          format: '{value:,.0f} ha'

    info:
      description: Ontario Watershed Boundaries - Tertiary level drainage areas

  - id: watersheds_quaternary
    name: Watersheds (Quaternary)
    category: boundaries
    type: polygon
    data_url: /data/datasets/environmental/watersheds_quaternary.geojson
    initial_visibility: false
    status: available
    active: false
    lazy_load: true

    style:
      fill:
        color: '#c6dbef'
        opacity: 0.15
      outline:
        color: '#6baed6'
        width: 1
        opacity: 0.5

    popup:
      title_field: QUATERNARY_WATERSHED_NAME
      title_default: Quaternary Watershed
      fields:
        - label: Name
          field: QUATERNARY_WATERSHED_NAME
        - label: Code
          field: QUATERNARY_WATERSHED_CODE
        - label: Area (ha)
          field: AREA_HA
          format: '{value:,.0f} ha'

    info:
      description: Ontario Watershed Boundaries - Quaternary (smallest) drainage areas. Large dataset - disabled by default.

  - id: lake_simcoe_watershed
    name: Lake Simcoe Watershed
    category: boundaries
    type: polygon
    data_url: /data/datasets/environmental/lake_simcoe_watershed.geojson
    initial_visibility: false
    status: available
    active: true
    lazy_load: true

    style:
      fill:
        color: '#41b6c4'
        opacity: 0.2
      outline:
        color: '#225ea8'
        width: 2.5
        opacity: 0.8

    popup:
      title_field: SUBWATERSHED_NAME
      title_default: Lake Simcoe Subwatershed
      fields:
        - label: Subwatershed
          field: SUBWATERSHED_NAME
        - label: Area (ha)
          field: AREA_HA
          format: '{value:,.2f} ha'

    info:
      description: Lake Simcoe Protection Act Watershed Boundary - important for water quality protection

  - id: dams
    name: Dams
    category: boundaries
    type: point
    data_url: /data/datasets/williams_treaty/dams.geojson
    initial_visibility: false
    status: available
    active: true
    lazy_load: true

    style:
      circle:
        radius: 5
        color: '#d95f0e'
        opacity: 0.8
        stroke_width: 1.5
        stroke_color: '#ffffff'

    popup:
      title_field: DAM_NAME
      title_default: Dam
      fields:
        - label: Name
          field: DAM_NAME
        - label: Type
          field: DAM_TYPE
        - label: Height (m)
          field: DAM_HEIGHT
          optional: true
        - label: Owner
          field: OWNER_NAME
          optional: true
        - label: Watercourse
          field: WATERCOURSE_NAME
          optional: true

    info:
      description: Dams in Williams Treaty territory from Ontario Dam Inventory

  # ============================================================================
  # ECOLOGY / PROTECTED AREAS
  # ============================================================================

  - id: conservation_reserves
    name: Conservation Reserves
    category: boundaries
    type: polygon
    data_url: /data/datasets/protected_areas/conservation_reserves.geojson
    initial_visibility: false
    status: available
    active: true
    lazy_load: true

    style:
      fill:
        color: '#74c476'
        opacity: 0.4
      outline:
        color: '#238b45'
        width: 2
        opacity: 0.8

    popup:
      title_field: ENGLISH_NAME
      title_default: Conservation Reserve
      fields:
        - label: Name
          field: ENGLISH_NAME
        - label: Regulation
          field: REGULATION_NUMBER
          optional: true
        - label: Area (ha)
          field: OFFICIAL_AREA_HA
          format: '{value:,.2f} ha'
          optional: true

    info:
      description: Ontario Conservation Reserves - regulated protected natural areas

  - id: federal_protected
    name: Federal Protected Areas
    category: boundaries
    type: polygon
    data_url: /data/datasets/protected_areas/federal_protected.geojson
    initial_visibility: false
    status: available
    active: true
    lazy_load: true

    style:
      fill:
        color: '#fd8d3c'
        opacity: 0.4
      outline:
        color: '#d94701'
        width: 2
        opacity: 0.8

    popup:
      title_field: ENGLISH_NAME
      title_default: Federal Protected Area
      fields:
        - label: Name
          field: ENGLISH_NAME
        - label: Type
          field: PROTECTED_AREA_TYPE
          optional: true

    info:
      description: Federal protected areas including National Parks and Wildlife Areas

  - id: ecodistricts
    name: Ecodistricts
    category: boundaries
    type: polygon
    data_url: /data/datasets/williams_treaty/ecodistricts.geojson
    initial_visibility: false
    status: available
    active: true
    lazy_load: true

    style:
      fill:
        color: '#bcbddc'
        opacity: 0.25
      outline:
        color: '#756bb1'
        width: 1.5
        opacity: 0.6

    popup:
      title_field: ECODISTRICT_NAME
      title_default: Ecodistrict
      fields:
        - label: Name
          field: ECODISTRICT_NAME
        - label: Code
          field: ECODISTRICT_CODE
        - label: Ecoregion
          field: ECOREGION_NAME
          optional: true

    info:
      description: Ecodistricts in Williams Treaty territory - ecological classification units for biodiversity planning

  - id: ecoregions
    name: Ecoregions
    category: boundaries
    type: polygon
    data_url: /data/datasets/environmental/ecoregions.geojson
    initial_visibility: false
    status: available
    active: true
    lazy_load: true

    style:
      fill:
        color: '#dadaeb'
        opacity: 0.2
      outline:
        color: '#9e9ac8'
        width: 2
        opacity: 0.7

    popup:
      title_field: ECOREGION_NAME
      title_default: Ecoregion
      fields:
        - label: Name
          field: ECOREGION_NAME
        - label: Code
          field: ECOREGION_CODE
        - label: Ecozone
          field: ECOZONE_NAME
          optional: true

    info:
      description: Ontario Ecoregions - broad ecological classification zones

  # ============================================================================
  # RECREATION / TRAILS
  # ============================================================================

  - id: trails
    name: Recreational Trails
    category: boundaries
    type: polygon
    data_url: /data/datasets/williams_treaty/trails.geojson
    initial_visibility: false
    status: available
    active: true
    lazy_load: true

    style:
      fill:
        color: '#8c6d31'
        opacity: 0.7
      outline:
        color: '#6b4423'
        width: 2
        opacity: 0.9

    popup:
      title_field: TRAIL_NAME
      title_default: Trail
      fields:
        - label: Name
          field: TRAIL_NAME
        - label: Trail Class
          field: TRAIL_CLASS
          optional: true
        - label: Surface
          field: TRAIL_SURFACE_TYPE
          optional: true
        - label: Permitted Uses
          field: PERMITTED_USES
          optional: true
        - label: Managing Agency
          field: MANAGING_AGENCY
          optional: true

    info:
      description: Recreational trails in Williams Treaty territory

  - id: trail_access
    name: Trail Access Points
    category: boundaries
    type: point
    data_url: /data/datasets/williams_treaty/trail_access_points.geojson
    initial_visibility: false
    status: available
    active: true
    lazy_load: true

    style:
      circle:
        radius: 6
        color: '#7a5230'
        opacity: 0.9
        stroke_width: 2
        stroke_color: '#ffffff'

    popup:
      title_field: ACCESS_POINT_NAME
      title_default: Trail Access Point
      fields:
        - label: Name
          field: ACCESS_POINT_NAME
        - label: Type
          field: ACCESS_POINT_TYPE
          optional: true
        - label: Parking
          field: PARKING_IND
          optional: true

    info:
      description: Trail access points and trailheads in Williams Treaty territory

  # ============================================================================
  # TERRAIN
  # ============================================================================

  - id: contours
    name: Contour Lines
    category: topography
    type: polygon
    data_url: /data/datasets/environmental/contours.geojson
    initial_visibility: false
    status: available
    active: false
    lazy_load: true

    style:
      fill:
        color: '#969696'
        opacity: 0.3
      outline:
        color: '#636363'
        width: 0.5
        opacity: 0.5

    popup:
      title: Contour Line
      fields:
        - label: Elevation (m)
          field: CONTOUR_ELEVATION
        - label: Type
          field: CONTOUR_TYPE
          optional: true

    info:
      description: Topographic contour lines - 1,922 features. Large dataset - disabled by default.
