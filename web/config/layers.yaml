# Williams Treaty Territories - Layer Configuration
# This file defines all map layers and their properties

# Layer activation:
# - active: true  - Layer appears in UI and can be loaded (default)
# - active: false - Layer configuration retained but hidden from UI
#   Use false to temporarily disable layers, keep WIP configs, or maintain
#   seasonal/conditional layers without deleting their configuration

# Layer categories for organizing the UI
categories:
  - id: boundaries
    name: Boundaries
    order: 1

  - id: organizations
    name: Organizations
    order: 2

  - id: communities
    name: Communities
    order: 3

  - id: vegetation
    name: Vegetation
    order: 4

  - id: topography
    name: Topography
    order: 5

  - id: fire
    name: Fire Data
    order: 6

  - id: community_data
    name: Community Data
    order: 7

  - id: health
    name: Public Health
    order: 8

  - id: biodiversity
    name: Biodiversity
    order: 9

  - id: satellite
    name: Satellite Data
    order: 10

# Layer definitions
layers:
  # ============================================================================
  # BOUNDARIES
  # ============================================================================

  - id: treaty
    name: Williams Treaty Territories
    category: boundaries
    type: polygon
    data_url: https://ontario-environmental-data.s3.us-east-1.amazonaws.com/datasets/boundaries/williams_treaty.geojson
    initial_visibility: true
    status: available
    active: true

    style:
      fill:
        color: '#2c5f2d'
        opacity: 0.1
      outline:
        color: '#2c5f2d'
        width: 3
        opacity: 0.8

    popup:
      title_field: ENAME
      title_default: Williams Treaty Territories
      fields:
        - label: Treaty Date
          field: DATE_YEAR
          default: '1923'
        - label: Category
          field: Category
          default: Treaty Land

    info:
      description: Treaty boundaries signed in 1923

  - id: ontario_reserves
    name: Ontario First Nations Reserves
    category: boundaries
    type: polygon
    data_url: https://ontario-environmental-data.s3.us-east-1.amazonaws.com/datasets/boundaries/ontario_reserves.geojson
    initial_visibility: false
    status: available
    active: true
    lazy_load: true

    style:
      fill:
        color: '#fee5d9'
        opacity: 0.2
      outline:
        color: '#fc8d59'
        width: 1
        opacity: 0.5
      before_layer: treaty-fill

    popup:
      title_fields: [adminAreaNameEng]
      fields:
        - label: Reserve Name
          field: adminAreaNameEng
        - label: Reserve ID
          field: adminAreaId
        - label: Type
          field: distributionTypeEng
        - label: Region
          field: adminRegionEng
        - label: Accuracy
          field: absoluteAccuracyEng

    info:
      description: All 203 Indian Reserves in Ontario from Natural Resources Canada

  - id: municipalities
    name: Ontario Municipalities
    category: boundaries
    type: polygon
    data_url: https://ontario-environmental-data.s3.us-east-1.amazonaws.com/datasets/boundaries/ontario_municipalities.geojson
    initial_visibility: false
    status: available
    active: true
    lazy_load: true

    style:
      fill:
        color: '#e0e0e0'
        opacity: 0.1
      outline:
        color: '#999999'
        width: 0.5
        opacity: 0.4

    popup:
      title_fields: [CSDNAME]
      fields:
        - label: Municipality Name
          field: CSDNAME
        - label: Type
          field: CSDTYPE
        - label: Population (2021)
          field: LANDAREA
        - label: Province
          field: PRNAME

    info:
      description: All 577 Census Subdivisions (municipalities) in Ontario from Statistics Canada 2021 Census

  - id: conservation_authorities
    name: Conservation Authorities
    category: boundaries
    type: polygon
    data_url: https://ontario-environmental-data.s3.us-east-1.amazonaws.com/datasets/protected_areas/williams_treaty_conservation_authorities.geojson
    initial_visibility: false
    status: available
    active: true
    lazy_load: true

    style:
      fill:
        color: '#a6cee3'
        opacity: 0.2
      outline:
        color: '#1f78b4'
        width: 1.5
        opacity: 0.6

    popup:
      title_fields: [LEGAL_NAME, COMMON_NAME]
      fields:
        - label: Legal Name
          field: LEGAL_NAME
        - label: Common Name
          field: COMMON_NAME
        - label: Area (sq km)
          field: AREA_IN_SQ_KM
        - label: Type
          field: F_TYPE

    info:
      description: Ontario's 36 Conservation Authorities from Land Information Ontario. Conservation authorities are local watershed management agencies that deliver services and programs to protect and manage natural resources.

  - id: reserves
    name: Williams Treaty Reserves
    category: boundaries
    type: polygon
    data_url: https://ontario-environmental-data.s3.us-east-1.amazonaws.com/datasets/boundaries/williams_treaty_reserves.geojson
    initial_visibility: false
    status: available
    active: true  # Set to false to hide from UI while keeping configuration
    lazy_load: true

    style:
      fill:
        color: '#fc8d59'
        opacity: 0.4
      outline:
        color: '#d73027'
        width: 2
        opacity: 0.8
      before_layer: treaty-fill

    popup:
      title_fields: [adminAreaNameEng]
      fields:
        - label: Reserve Name
          field: adminAreaNameEng
        - label: Reserve ID
          field: adminAreaId
        - label: Type
          field: distributionTypeEng
        - label: Region
          field: adminRegionEng
        - label: Accuracy
          field: absoluteAccuracyEng

    info:
      description: The 10 Indian Reserves of the 7 Williams Treaty First Nations

  - id: provincial_parks
    name: Provincial Parks
    category: boundaries
    type: polygon
    data_url: https://ontario-environmental-data.s3.us-east-1.amazonaws.com/datasets/protected_areas/williams_treaty_provincial_parks.geojson
    initial_visibility: false
    status: available
    active: true
    lazy_load: true

    style:
      fill:
        # Color by park class
        color:
          type: categorical
          field: PROVINCIAL_PARK_CLASS_ENG
          values:
            Wilderness: '#006d2c'           # Dark green - most protected
            Natural Environment: '#31a354'  # Medium green
            Waterway: '#74c476'             # Light green
            Recreation: '#a1d99b'           # Pale green
            Cultural Heritage: '#8c6bb1'    # Purple for cultural sites
          default: '#66c2a4'                # Teal for others
        opacity: 0.4
      outline:
        color: '#238b45'
        width: 2
        opacity: 0.8

    popup:
      title_field: PROTECTED_AREA_NAME_ENG
      fields:
        - label: Short Name
          field: COMMON_SHORT_NAME
        - label: Park Class
          field: PROVINCIAL_PARK_CLASS_ENG
        - label: IUCN Category
          field: IUCN_CATEGORY
        - label: Area (ha)
          field: REGULATED_AREA
          format: '{value:,.0f} ha'
        - label: Established
          field: PROTDATE
        - label: Status
          field: STATUS_ENG
        - label: Management
          field: MANAGEMENT_ENG
        - label: Website
          field: URL
          type: link

    legend:
      type: items
      title: Provincial Parks
      items:
        - color: rgba(0, 109, 44, 0.4)
          border: 2px solid #238b45
          label: Wilderness
        - color: rgba(49, 163, 84, 0.4)
          border: 2px solid #238b45
          label: Natural Environment
        - color: rgba(116, 196, 118, 0.4)
          border: 2px solid #238b45
          label: Waterway
        - color: rgba(161, 217, 155, 0.4)
          border: 2px solid #238b45
          label: Recreation
        - color: rgba(140, 107, 177, 0.4)
          border: 2px solid #238b45
          label: Cultural Heritage
      description: Parks classified by primary purpose

    info:
      description: Ontario Provincial Parks classified by conservation and recreation purpose

  - id: wetlands
    name: Wetlands
    category: boundaries
    type: polygon
    data_url: https://ontario-environmental-data.s3.us-east-1.amazonaws.com/datasets/hydrology/williams_treaty_wetlands.geojson
    initial_visibility: false
    status: available
    active: true
    lazy_load: true

    style:
      fill:
        color: '#74add1'
        opacity: 0.5
      outline:
        color: '#4575b4'
        width: 1
        opacity: 0.7

    popup:
      title_field: WETLAND_TY
      title_default: Wetland
      fields:
        - label: Wetland Type
          field: WETLAND_TY
        - label: Class
          field: CLASS
          optional: true
        - label: Area (ha)
          field: AREA_HA
          format: '{value:,.2f} ha'
          optional: true

    info:
      description: 892 wetland areas in Williams Treaty territory

  - id: watersheds
    name: Watersheds
    category: boundaries
    type: polygon
    data_url: https://ontario-environmental-data.s3.us-east-1.amazonaws.com/datasets/hydrology/williams_treaty_watersheds.geojson
    initial_visibility: false
    status: available
    active: true
    lazy_load: true

    style:
      fill:
        color: '#4292c6'
        opacity: 0.15
      outline:
        color: '#08519c'
        width: 1.5
        opacity: 0.6

    popup:
      title_fields: [NAME1, NAME2]
      title_default: Watershed
      fields:
        - label: Primary Watershed
          field: NAME1
        - label: Secondary Watershed
          field: NAME2
        - label: Tertiary Watershed
          field: NAME3
          optional: true
        - label: Quaternary Watershed
          field: NAME4
          optional: true
        - label: Area (hectares)
          field: AREA_HA
          format: '{value:,.2f} ha'
        - label: Area (acres)
          field: AREA_ACRE
          format: '{value:,.2f} acres'
        - label: Watershed Code
          field: CODE6
        - label: Data Source
          field: SOURCE

    legend:
      type: items
      title: Watersheds
      items:
        - color: rgba(66, 146, 198, 0.15)
          border: 1.5px solid #08519c
          label: Watershed boundary
      description: Hierarchical watershed drainage areas

    info:
      description: Ontario watersheds showing hierarchical drainage basins from primary to quaternary levels

  # ============================================================================
  # ORGANIZATIONS
  # ============================================================================

  - id: charities
    name: Environmental Charities
    category: organizations
    type: point
    data_url: https://ontario-environmental-data.s3.us-east-1.amazonaws.com/datasets/organizations/environmental_organizations.geojson
    initial_visibility: false
    status: available
    active: true  # Now available in S3

    style:
      circle:
        radius: 6
        color: '#3887be'
        opacity: 0.8
        stroke_width: 2
        stroke_color: '#ffffff'

    popup:
      title_field: name
      fields:
        - label: Location
          format: '{city}, {province}'
        - label: Category
          field: category
        - label: Revenue
          field: revenue
          format: '${value:,.0f}'
        - label: Programs
          field: programs
          truncate: 100
        - label: Website
          field: website
          type: link

    info:
      description: 186 environmental organizations

  # ============================================================================
  # COMMUNITIES
  # ============================================================================

  - id: communities
    name: Williams Treaty First Nations
    category: communities
    type: point
    data_url: https://ontario-environmental-data.s3.us-east-1.amazonaws.com/datasets/boundaries/williams_treaty_communities.geojson
    initial_visibility: false
    status: available

    style:
      circle:
        radius: 8
        color: '#d73027'
        opacity: 0.9
        stroke_width: 2
        stroke_color: '#ffffff'

    popup:
      title_field: name
      fields:
        - label: Reserve
          field: reserve_name
        - label: Population
          field: population
          format: '~{value:,.0f}'
        - label: Treaty
          field: treaty

    info:
      description: 7 First Nations communities (~9,000 people)

  - id: infrastructure
    name: Infrastructure Projects
    category: community_data
    type: point
    data_url: https://ontario-environmental-data.s3.us-east-1.amazonaws.com/datasets/community/williams_treaty_infrastructure_projects.geojson
    initial_visibility: false
    status: available
    active: true
    lazy_load: true

    style:
      circle:
        radius: 5
        opacity: 0.8
        stroke_width: 1
        stroke_color: '#ffffff'
        # Data-driven styling
        color:
          type: categorical
          field: category
          values:
            Housing: '#e41a1c'
            'Water and Wastewater': '#377eb8'
            'Solid Waste Management': '#4daf4a'
            'Fire Protection': '#ff7f00'
            Health: '#984ea3'
          default: '#999999'

    popup:
      title_fields: [project_name]
      title_default: Infrastructure Project
      fields:
        - label: Community
          field: community
        - label: Category
          field: category
        - label: Status
          field: status
        - label: Description
          field: description
          truncate: 200
        - label: Investment
          field: investment
          hide_if: Not Available

    info:
      description: 445 federal infrastructure projects in Williams Treaty territory

  - id: water_advisories
    name: Water Advisories
    category: community_data
    type: point
    data_url: https://ontario-environmental-data.s3.us-east-1.amazonaws.com/datasets/community/williams_treaty_water_advisories.geojson
    initial_visibility: false
    status: available
    active: true
    lazy_load: true

    # Per-layer data source configuration
    data_source:
      source_info:
        provider: "Indigenous Services Canada"
        dataset: "Drinking Water Advisories"
        date: "2025-11-24"
        license: "Open Government License - Canada"
        license_url: "https://open.canada.ca/en/open-government-licence-canada"
        update_frequency: "Weekly"

    style:
      circle:
        radius: 7
        opacity: 0.9
        stroke_width: 2
        stroke_color: '#ffffff'
        # Data-driven styling
        color:
          type: conditional
          field: is_active
          conditions:
            - when: true
              value: '#d73027'  # Red for active
            - when: false
              value: '#91cf60'  # Green for lifted

    popup:
      title_fields: [water_system]
      title_default: Water System
      fields:
        - label: First Nation
          field: first_nation
        - label: Status
          field: is_active
          format_active: '<span style="color:#d73027;font-weight:bold">ACTIVE</span>'
          format_inactive: '<span style="color:#91cf60;font-weight:bold">Lifted</span>'
        - label: Type
          field: advisory_type
        - label: Date Set
          field: date_set
        - label: Date Lifted
          field: date_lifted
          optional: true
        - label: Corrective Measure
          field: corrective_measure
          optional: true

    info:
      description: 3 water advisories in Williams Treaty territory (1 active)

  - id: cwb
    name: Community Well-Being
    category: community_data
    type: polygon
    data_url: https://ontario-environmental-data.s3.us-east-1.amazonaws.com/datasets/community/williams_treaty_community_wellbeing.geojson
    initial_visibility: false
    status: available
    lazy_load: true

    style:
      fill:
        # Choropleth coloring based on CWB score (0-100 scale)
        color:
          type: interpolate
          field: cwb_score
          stops:
            - [50, '#d73027']  # Very low CWB - red
            - [65, '#fc8d59']  # Low - orange
            - [70, '#fee08b']  # Medium-low - yellow
            - [75, '#d9ef8b']  # Medium - yellow-green
            - [80, '#91cf60']  # Medium-high - light green
            - [85, '#1a9850']  # High CWB - green
        opacity: 0.65
      outline:
        color: '#555'
        width: 1
        opacity: 0.6
      before_layer: treaty-fill

    popup:
      title_field: csd_name
      fields:
        - label: Community Well-Being Score
          field: cwb_score
        - label: Population
          field: population
        - label: Income
          field: income_score
          optional: true
        - label: Education
          field: education_score
          optional: true
        - label: Housing
          field: housing_score
          optional: true
        - label: Labour Force
          field: labour_force_score
          optional: true

    info:
      description: 122 communities in Williams Treaty territory (2021 data)

  # ============================================================================
  # PUBLIC HEALTH
  # ============================================================================

  - id: phu_boundaries
    name: Public Health Unit Boundaries
    category: health
    type: polygon
    data_url: https://ontario-environmental-data.s3.us-east-1.amazonaws.com/datasets/health/phu_boundaries.geojson
    initial_visibility: false
    status: available
    active: true
    lazy_load: true

    style:
      fill:
        color: '#20B2AA'
        opacity: 0.1
      outline:
        color: '#008B8B'
        width: 2
        opacity: 0.7
      before_layer: treaty-fill

    popup:
      title_field: name
      fields:
        - label: Area (km²)
          field: area_sq_km
          format: number
          optional: true

    info:
      description: Ontario's 34 Public Health Units responsible for local public health services

  - id: health_indicators
    name: Health Indicators by Region
    category: health
    type: polygon
    data_url: https://ontario-environmental-data.s3.us-east-1.amazonaws.com/datasets/health/health_indicators.geojson
    initial_visibility: false
    status: available
    active: true
    lazy_load: true

    style:
      fill:
        # Choropleth coloring based on diabetes rate
        color:
          type: interpolate
          field: diabetes_rate
          stops:
            - [9, '#1a9850']   # Low - green
            - [10, '#91cf60']
            - [11, '#d9ef8b']
            - [12, '#fee08b']
            - [13, '#fc8d59']
            - [14, '#d73027']  # High - red
        opacity: 0.6
      outline:
        color: '#555'
        width: 1
        opacity: 0.6
      before_layer: treaty-fill

    popup:
      title_field: name
      fields:
        - label: Ontario Health Region
          field: oh_region
        - label: Diabetes Rate (%)
          field: diabetes_rate
        - label: Hypertension Rate (%)
          field: hypertension_rate
        - label: Asthma Rate (%)
          field: asthma_rate
        - label: COPD Rate (%)
          field: copd_rate
        - label: Mental Health Visits (per 100)
          field: mental_health_visits
        - label: Primary Care Attachment (%)
          field: primary_care_attachment
          optional: true

    legend:
      type: gradient
      title: Diabetes Prevalence (%)
      gradient: linear-gradient(to right, #1a9850, #91cf60, #d9ef8b, #fee08b, #fc8d59, #d73027)
      stops:
        - value: 9
          label: 9%
        - value: 11
          label: 11%
        - value: 14
          label: 14%
      description: Age-standardized diabetes prevalence by Ontario Health Region

    info:
      description: Public health indicators from OCHPP aggregated by Ontario Health Region. Includes chronic disease prevalence, mental health metrics, and healthcare access.

  # ============================================================================
  # VEGETATION
  # ============================================================================

  - id: ndvi
    name: NDVI 2023 (Vegetation Index)
    category: satellite
    type: mapbox-raster
    data_url: mapbox://robertsoden.ndvi_2023_colored
    initial_visibility: false
    status: available
    active: true
    lazy_load: true

    style:
      opacity: 0.8
      before_layer: treaty-fill

    legend:
      type: gradient
      title: Vegetation Index (NDVI)
      gradient: linear-gradient(to right, #d73027, #fc8d59, #fee08b, #d9ef8b, #91cf60, #1a9850, #006837)
      stops:
        - value: 0.0
          label: Low
        - value: 0.5
          label: Moderate
        - value: 1.0
          label: High
      description: Red = sparse/bare, Green = dense vegetation

    info:
      description: Peak annual 2023 MODIS 250m vegetation index (max NDVI across year). Red indicates sparse/bare land, green indicates dense vegetation.

  - id: landcover
    name: Land Cover 2020
    category: satellite
    type: mapbox-raster
    data_url: mapbox://robertsoden.landcover_2020
    initial_visibility: false
    status: available
    active: true
    lazy_load: true

    style:
      opacity: 0.8
      before_layer: treaty-fill
      # Note: raster_color removed - tiles are pre-rendered RGB from Mapbox upload

    legend:
      type: categorical
      title: Land Cover Classes
      categories:
        - value: 1
          label: Needleleaf Forest
          color: '#003d00'
        - value: 2
          label: Taiga Forest
          color: '#949c70'
        - value: 5
          label: Deciduous Forest
          color: '#148c3d'
        - value: 6
          label: Mixed Forest
          color: '#5c752b'
        - value: 8
          label: Shrubland
          color: '#b38a33'
        - value: 10
          label: Grassland
          color: '#e1cf8a'
        - value: 14
          label: Wetland
          color: '#6ba38a'
        - value: 15
          label: Cropland
          color: '#e6ae66'
        - value: 16
          label: Barren
          color: '#a8abae'
        - value: 17
          label: Urban
          color: '#dc2126'
        - value: 18
          label: Water
          color: '#4c70a3'
        - value: 19
          label: Snow/Ice
          color: '#fffaff'
      description: NALCMS 2020 land cover classification

    info:
      description: |
        North American Land Change Monitoring System (NALCMS) 2020 land cover
        classification for Ontario at 30m resolution, served via Mapbox Tilesets (zoom 5-11).
        Data source: Natural Resources Canada

  - id: landcover_2015
    name: Land Cover 2015
    category: satellite
    type: mapbox-raster
    data_url: mapbox://robertsoden.landcover_2015
    initial_visibility: false
    status: available
    active: true
    lazy_load: true

    style:
      opacity: 0.8
      before_layer: treaty-fill
      # Note: raster_color removed - tiles are pre-rendered RGB from Mapbox upload

    legend:
      type: categorical
      title: Land Cover Classes
      categories:
        - value: 1
          label: Needleleaf Forest
          color: '#003d00'
        - value: 2
          label: Taiga Forest
          color: '#949c70'
        - value: 5
          label: Deciduous Forest
          color: '#148c3d'
        - value: 6
          label: Mixed Forest
          color: '#5c752b'
        - value: 8
          label: Shrubland
          color: '#b38a33'
        - value: 10
          label: Grassland
          color: '#e1cf8a'
        - value: 14
          label: Wetland
          color: '#6ba38a'
        - value: 15
          label: Cropland
          color: '#e6ae66'
        - value: 16
          label: Barren
          color: '#a8abae'
        - value: 17
          label: Urban
          color: '#dc2126'
        - value: 18
          label: Water
          color: '#4c70a3'
        - value: 19
          label: Snow/Ice
          color: '#fffaff'
      description: NALCMS 2015 land cover classification

    info:
      description: |
        North American Land Change Monitoring System (NALCMS) 2015 land cover
        classification for Ontario at 30m resolution, served via Mapbox Tilesets (zoom 5-11).
        Data source: Natural Resources Canada

  - id: landcover_2010
    name: Land Cover 2010
    category: satellite
    type: mapbox-raster
    data_url: mapbox://robertsoden.landcover_2010
    initial_visibility: false
    status: available
    active: true
    lazy_load: true

    style:
      opacity: 0.8
      before_layer: treaty-fill
      # Note: raster_color removed - tiles are pre-rendered RGB from Mapbox upload

    legend:
      type: categorical
      title: Land Cover Classes
      categories:
        - value: 1
          label: Needleleaf Forest
          color: '#003d00'
        - value: 2
          label: Taiga Forest
          color: '#949c70'
        - value: 5
          label: Deciduous Forest
          color: '#148c3d'
        - value: 6
          label: Mixed Forest
          color: '#5c752b'
        - value: 8
          label: Shrubland
          color: '#b38a33'
        - value: 10
          label: Grassland
          color: '#e1cf8a'
        - value: 14
          label: Wetland
          color: '#6ba38a'
        - value: 15
          label: Cropland
          color: '#e6ae66'
        - value: 16
          label: Barren
          color: '#a8abae'
        - value: 17
          label: Urban
          color: '#dc2126'
        - value: 18
          label: Water
          color: '#4c70a3'
        - value: 19
          label: Snow/Ice
          color: '#fffaff'
      description: NALCMS 2010 land cover classification

    info:
      description: |
        North American Land Change Monitoring System (NALCMS) 2010 land cover
        classification for Ontario at 30m resolution, served via Mapbox Tilesets (zoom 5-11).
        Data source: Natural Resources Canada

  # ============================================================================
  # TOPOGRAPHY
  # ============================================================================

  - id: hillshade
    name: Terrain Hillshade
    category: topography
    type: arcgis-tile
    data_url: https://tiles.arcgis.com/tiles/B6yKvIZqzuOr0jBR/arcgis/rest/services/Canada_Hillshade/MapServer
    initial_visibility: false
    status: available
    active: true
    lazy_load: true

    style:
      opacity: 0.65
      before_layer: treaty-fill

    info:
      description: "Terrain hillshade showing topographic relief with shading. Covers all of Canada including Ontario. Source: ArcGIS Online / Esri Canada."

  - id: contours
    name: Contour Lines
    category: topography
    type: line
    data_url: https://ontario-environmental-data.s3.us-east-1.amazonaws.com/datasets/environmental/williams_treaty_contours.geojson
    initial_visibility: false
    status: available
    active: true
    lazy_load: true

    style:
      line:
        color: '#8B4513'
        width: 0.5
        opacity: 0.6

    popup:
      title_default: Contour Line
      fields:
        - label: Elevation
          field: CONTOUR_ELEVATION
          format: '{value} m'
          optional: true

    info:
      description: "Topographic contour lines showing elevation changes across Williams Treaty territory. Source: Ontario GeoHub."

  # ============================================================================
  # BIODIVERSITY
  # ============================================================================

  - id: ebird
    name: eBird Observations
    category: biodiversity
    type: point
    data_url: https://ontario-environmental-data.s3.us-east-1.amazonaws.com/datasets/biodiversity/ebird_observations.geojson
    initial_visibility: false
    status: available
    active: true
    lazy_load: true

    style:
      circle:
        radius: 5
        color: '#e74c3c'
        opacity: 0.7
        stroke_width: 1
        stroke_color: '#ffffff'

    popup:
      title_field: comName
      title_default: Bird Observation
      fields:
        - label: Common Name
          field: comName
        - label: Scientific Name
          field: sciName
        - label: Count
          field: howMany
        - label: Date
          field: obsDt
        - label: Location
          field: locName

    info:
      description: Recent eBird bird observations in the Williams Treaty area

  # ============================================================================
  # FIRE DATA
  # ============================================================================

  - id: fire
    name: Fire Perimeters
    category: fire
    type: polygon
    data_url: https://ontario-environmental-data.s3.us-east-1.amazonaws.com/datasets/environmental/williams_treaty_fire_perimeters.geojson
    initial_visibility: false
    status: available
    lazy_load: true

    # Per-layer data source configuration
    data_source:
      # Source metadata
      source_info:
        provider: "Canadian Wildland Fire Information System (CWFIS)"
        dataset: "National Fire Database - Historical Fire Perimeters"
        date_range: "1977-2024"
        license: "Open Government License - Canada"
        license_url: "https://open.canada.ca/en/open-government-licence-canada"
        update_frequency: "Annual"
        source_url: "https://cwfis.cfs.nrcan.gc.ca/datamart"

    style:
      fill:
        color: '#d73027'
        opacity: 0.4
      outline:
        color: '#a50026'
        width: 1
        opacity: 0.8

    popup:
      title: Fire Perimeter
      fields:
        - label: Year
          fields: [year, YEAR, EXERCICE, AN_ORIGINE]
          default: Unknown
        - label: Area
          field: area
          format: '{value_ha:.2f} ha'
          calculate_ha_from: area  # area in m²
        - label: Fire ID
          field: FIRE_ID
          optional: true
        - label: Origin
          field: ORIGINE
          optional: true

    legend:
      type: items
      title: Fire Perimeters Legend
      items:
        - color: rgba(215, 48, 39, 0.4)
          border: 1px solid #a50026
          label: Historical fire boundaries (1977-2024)
      description: Click on fire perimeters for details

    info:
      description: 29 historical fire perimeters in Williams Treaty territory (1977-2024)

  - id: fuel_type
    name: Wildland Fuel Classification
    category: fire
    type: raster
    data_url: /data/processed/fuel/fuel_types_web.tif
    initial_visibility: false
    status: available
    active: false  # Deactivated - data not yet in ontario-environmental-data S3
    lazy_load: true
    requires_library: georaster

    # Override to use local-only mode (raster data not in S3 yet)
    data_source:
      mode: local

    style:
      opacity: 0.6
      color_scale:
        type: categorical
        values:
          0: [200, 200, 200, 100]      # Non-fuel / Water
          99: [200, 200, 200, 100]     # Water
          1-4: [34, 139, 34, 180]      # Coniferous (C-1 to C-4) - Green
          5-7: [0, 100, 0, 180]        # Coniferous Dense (C-5 to C-7) - Dark green
          11-18: [255, 215, 0, 180]    # Deciduous (D-1, D-2) - Gold
          21-25: [173, 255, 47, 180]   # Mixed wood (M-1, M-2) - Yellow-green
          31-32: [184, 134, 11, 180]   # Slash (S-1, S-2) - Dark gold
          40-43: [255, 255, 153, 180]  # Grass (O-1a, O-1b) - Light yellow
        default: [139, 69, 19, 180]    # Other - Brown
      before_layer: treaty-fill

    legend:
      type: items
      title: Fuel Type Legend
      items:
        - color: rgba(34, 139, 34, 0.7)
          label: Coniferous (C-1 to C-4)
        - color: rgba(0, 100, 0, 0.7)
          label: Coniferous Dense (C-5 to C-7)
        - color: rgba(255, 215, 0, 0.7)
          label: Deciduous (D-1, D-2)
        - color: rgba(173, 255, 47, 0.7)
          label: Mixed Wood (M-1, M-2)
        - color: rgba(184, 134, 11, 0.7)
          label: Slash (S-1, S-2)
        - color: rgba(255, 255, 153, 0.7)
          label: Grass/Open (O-1a, O-1b)
      description: Canadian FBP System fuel types

    info:
      description: Canadian FBP System fuel types
